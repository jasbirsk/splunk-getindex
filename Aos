index="your_index" your_field="your_value" earliest=-24h@h latest=now
| bin _time span=1h
| stats first(_time) as first_time last(_time) as last_time by _time
| join type=left _time [ search index="your_index" your_field="your_value" earliest=-24h@h latest=now | bucket _time span=1h | stats first(_raw) as first_event_raw last(_raw) as last_event_raw by _time ]
| eval first_event=strftime(first_time, "%Y-%m-%d %H:%M:%S")
| eval last_event=strftime(last_time, "%Y-%m-%d %H:%M:%S")
| table _time first_event last_event first_event_raw last_event_raw
